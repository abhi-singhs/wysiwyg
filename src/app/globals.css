@import "tailwindcss";

/* Base design tokens (light theme defaults) */
:root {
  --background: #ffffff;
  --foreground: #171717;
  --surface: #ffffff;
  --surface-subtle: #f5f7fa;
  --border: #d0d5dd;
  --border-strong: #98a2b3;
  --accent: #1d4ed8;
  --accent-hover: #1e40af;
  --text-muted: #475467; /* WCAG AA on white */
  --text-placeholder: #667085; /* passes placeholder contrast */
  --focus-ring: #2563eb;
}

/* Removed unsupported @theme rule (was causing build error) */

@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    --background: #0a0a0a;
    --foreground: #f5f5f5;
    --surface: #161616;
    --surface-subtle: #1e1e1e;
    --border: #333741;
    --border-strong: #4d5562;
    --accent: #3b82f6;
    --accent-hover: #1d4ed8;
    --text-muted: #d0d4db;
    --text-placeholder: #9da4ae;
    --focus-ring: #3b82f6;
  }
}

/* Explicit dark mode class (overrides system preference). Applied to <html class="dark"> via JS */
.dark {
  --background: #0a0a0a;
  --foreground: #f5f5f5;
  --surface: #161616;
  --surface-subtle: #1e1e1e;
  --border: #333741;
  --border-strong: #4d5562;
  --accent: #3b82f6;
  --accent-hover: #1d4ed8;
  --text-muted: #d0d4db;
  --text-placeholder: #9da4ae;
  --focus-ring: #3b82f6;
}

/* Force light mode even if system prefers dark */
.light {
  --background: #ffffff;
  --foreground: #171717;
  --surface: #ffffff;
  --surface-subtle: #f5f7fa;
  --border: #d0d5dd;
  --border-strong: #98a2b3;
  --accent: #1d4ed8;
  --accent-hover: #1e40af;
  --text-muted: #475467;
  --text-placeholder: #667085;
  --focus-ring: #2563eb;
}


body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* Instant tooltips using data-tip attribute (no delay) */
[data-tip] {
  position: relative;
  cursor: pointer;
}
[data-tip]::after {
  content: attr(data-tip);
  position: absolute;
  top: calc(100% + 4px);
  left: 50%;
  transform: translateX(-50%);
  background: rgba(17,24,39,0.92); /* gray-900 with opacity */
  color: #fff;
  font-size: 11px;
  line-height: 1;
  padding: 6px 8px;
  border-radius: 4px;
  white-space: nowrap;
  box-shadow: 0 2px 6px rgba(0,0,0,0.25);
  opacity: 0;
  pointer-events: none;
  transition: opacity .08s ease-in;
  z-index: 40;
}
[data-tip]:hover::after,[data-tip]:focus-visible::after {
  opacity: 1;
}
.dark [data-tip]::after {
  background: rgba(250,250,250,0.12);
  color: var(--foreground);
  border: 1px solid var(--border);
}

/* Form elements */
input, textarea, select {
  background-color: var(--surface);
  color: var(--foreground);
  border-color: var(--border);
}
input::placeholder, textarea::placeholder {
  color: var(--text-placeholder);
  opacity: 1; /* ensure color is not faded */
}
input:focus, textarea:focus, select:focus {
  outline: none;
  border-color: var(--focus-ring);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--focus-ring) 60%, transparent);
}

/* Muted text utility */
.text-muted { color: var(--text-muted); }

/* Surfaces (can be mapped via utility classes if desired) */
.surface { background-color: var(--surface); }
.surface-subtle { background-color: var(--surface-subtle); }

/* Override Tailwind gray backgrounds for better dark mode contrast when user relies on system preference */
@media (prefers-color-scheme: dark) {
  .bg-white { background-color: var(--surface) !important; }
  .bg-gray-50 { background-color: var(--surface-subtle) !important; }
  .border-gray-300 { border-color: var(--border) !important; }
  .text-gray-700, .text-gray-600, .text-gray-500 { color: var(--text-muted) !important; }
  .text-gray-900 { color: var(--foreground) !important; }
}

/* When using explicit .dark class, ensure same overrides (higher specificity) */
.dark .bg-white { background-color: var(--surface) !important; }
.dark .bg-gray-50 { background-color: var(--surface-subtle) !important; }
.dark .border-gray-300 { border-color: var(--border) !important; }
.dark .text-gray-700, .dark .text-gray-600, .dark .text-gray-500 { color: var(--text-muted) !important; }
.dark .text-gray-900 { color: var(--foreground) !important; }

/* GitHub-flavored markdown styling (scoped) */
.markdown-body { --md-border: var(--border); --md-fg: var(--foreground); --md-muted: var(--text-muted); --md-accent: var(--accent); --md-surface: var(--surface); line-height:1.55; color:var(--md-fg); word-wrap:break-word; }
.markdown-body a.md-anchor { opacity:0; margin-left:-1.1ch; padding-right:.25ch; text-decoration:none; color:var(--md-accent); }
.markdown-body .md-heading { position:relative; scroll-margin-top: 80px; font-weight:600; line-height:1.25; }
.markdown-body .md-heading:hover a.md-anchor { opacity:1; }
.markdown-body h1.md-heading { font-size:1.6rem; margin:1.4em 0 .6em; border-bottom:1px solid var(--md-border); padding-bottom:.3em; }
.markdown-body h2.md-heading { font-size:1.35rem; margin:1.2em 0 .6em; border-bottom:1px solid var(--md-border); padding-bottom:.25em; }
.markdown-body h3.md-heading { font-size:1.15rem; margin:1.1em 0 .5em; }
.markdown-body h4.md-heading { font-size:1rem; margin:1em 0 .4em; }
.markdown-body h5.md-heading { font-size:.95rem; margin:.9em 0 .4em; }
.markdown-body h6.md-heading { font-size:.85rem; margin:.8em 0 .4em; color:var(--md-muted); }
.markdown-body p { margin: .75em 0; }
.markdown-body strong { font-weight:600; }
.markdown-body em { font-style:italic; }
.markdown-body del { opacity:.75; }
.markdown-body hr.md-hr { border:0; border-top:1px solid var(--md-border); margin:2rem 0; }
.markdown-body pre.md-code-block { background: var(--surface-subtle); padding:.9rem 1rem; border:1px solid var(--md-border); border-radius:6px; overflow:auto; font-size:.75rem; line-height:1.4; }
.markdown-body code.md-inline-code { background: var(--surface-subtle); padding:0 .35em; border:1px solid var(--md-border); border-radius:4px; font-size:.75rem; }
.markdown-body blockquote.md-blockquote { margin:1em 0; padding:.6em .9em; border-left:4px solid var(--md-border); background:var(--surface-subtle); border-radius:0 6px 6px 0; color:var(--md-muted); }
.markdown-body ul.md-list, .markdown-body ol.md-list { padding-left:1.4em; margin:.75em 0 .75em; }
/* Re-enable list markers (Tailwind preflight removes them) */
.markdown-body ul.md-list { list-style: disc outside; }
.markdown-body ul.md-list ul.md-list { list-style: circle outside; }
.markdown-body ul.md-list ul.md-list ul.md-list { list-style: square outside; }
.markdown-body ol.md-list { list-style: decimal outside; }
.markdown-body li.md-li { margin:.3em 0; }
.markdown-body li.md-li > p { margin:.3em 0; }
.markdown-body table { border-collapse: collapse; width:100%; font-size:.8rem; }
.markdown-body .md-table-wrapper { overflow-x:auto; margin:1rem 0; }
.markdown-body table th, .markdown-body table td { border:1px solid var(--md-border); padding:.5em .6em; text-align:left; }
.markdown-body table th { background: var(--surface-subtle); font-weight:600; }
.markdown-body img { max-width:100%; height:auto; }
.markdown-body figure.md-image-wrapper { margin:1.2em 0; text-align:center; }
.markdown-body .md-image-caption { font-size:.7rem; color:var(--md-muted); margin-top:.4em; }
.markdown-body a.md-link { color: var(--md-accent); text-decoration: underline; text-underline-offset:2px; }
.markdown-body a.md-link:hover { color: var(--accent-hover); }
.markdown-body input[type=checkbox] { vertical-align:middle; margin-right:.4em; }
.markdown-body :target.md-heading { background: var(--surface-subtle); }
.dark .markdown-body :target.md-heading { background: var(--surface-subtle); }
